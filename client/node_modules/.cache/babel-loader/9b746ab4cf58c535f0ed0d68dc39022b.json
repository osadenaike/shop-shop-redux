{"ast":null,"code":"var _jsxFileName = \"/Users/oluz/Desktop/shop-shop-redux/client/src/components/ProductItem/index.js\";\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { pluralize } from '../../utils/helpers';\nimport { addToCart, updateCartQuantity } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\n\nfunction ProductItem(item) {\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n  const {\n    cart\n  } = state;\n\n  const addItemToCart = () => {\n    // find the cart item with the matching id\n    const itemInCart = cart.find(cartItem => cartItem._id === _id); // if there was a match, call UPDATE with a new purchase quantity\n\n    if (itemInCart) {\n      dispatch(updateCartQuantity(_id, parseInt(itemInCart.purchaseQuantity) + 1));\n      idbPromise('cart', 'put', { ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n    } else {\n      dispatch(addToCart({ ...item,\n        purchaseQuantity: 1\n      }));\n      idbPromise('cart', 'put', { ...item,\n        purchaseQuantity: 1\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card px-1 py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/products/${_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: name,\n    src: `/images/${image}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, quantity, \" \", pluralize('item', quantity), \" in stock\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, \"$\", price)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addItemToCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }\n  }, \"Add to cart\"));\n}\n\nexport default ProductItem;","map":{"version":3,"sources":["/Users/oluz/Desktop/shop-shop-redux/client/src/components/ProductItem/index.js"],"names":["React","useSelector","useDispatch","Link","pluralize","addToCart","updateCartQuantity","idbPromise","ProductItem","item","image","name","_id","price","quantity","state","dispatch","cart","addItemToCart","itemInCart","find","cartItem","parseInt","purchaseQuantity"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,SAAT,EAAoBC,kBAApB,QAA8C,qBAA9C;AACA,SAASC,UAAT,QAA2B,qBAA3B;;AAEA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AAC1B,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,IAAT;AAAeC,IAAAA,GAAf;AAAoBC,IAAAA,KAApB;AAA2BC,IAAAA;AAA3B,MAAwCL,IAA9C;AAEA,QAAMM,KAAK,GAAGd,WAAW,CAAEc,KAAD,IAAWA,KAAZ,CAAzB;AACA,QAAMC,QAAQ,GAAGd,WAAW,EAA5B;AAEA,QAAM;AAAEe,IAAAA;AAAF,MAAWF,KAAjB;;AAEA,QAAMG,aAAa,GAAG,MAAM;AAC3B;AACA,UAAMC,UAAU,GAAGF,IAAI,CAACG,IAAL,CAAWC,QAAD,IAAcA,QAAQ,CAACT,GAAT,KAAiBA,GAAzC,CAAnB,CAF2B,CAI3B;;AACA,QAAIO,UAAJ,EAAgB;AACfH,MAAAA,QAAQ,CAACV,kBAAkB,CAACM,GAAD,EAAMU,QAAQ,CAACH,UAAU,CAACI,gBAAZ,CAAR,GAAwC,CAA9C,CAAnB,CAAR;AACAhB,MAAAA,UAAU,CAAC,MAAD,EAAS,KAAT,EAAgB,EACzB,GAAGY,UADsB;AAEzBI,QAAAA,gBAAgB,EAAGD,QAAQ,CAACH,UAAU,CAACI,gBAAZ,CAAR,GAAwC;AAFlC,OAAhB,CAAV;AAIA,KAND,MAMO;AACNP,MAAAA,QAAQ,CAACX,SAAS,CAAC,EAAE,GAAGI,IAAL;AAAWc,QAAAA,gBAAgB,EAAE;AAA7B,OAAD,CAAV,CAAR;AACAhB,MAAAA,UAAU,CAAC,MAAD,EAAS,KAAT,EAAgB,EAAE,GAAGE,IAAL;AAAWc,QAAAA,gBAAgB,EAAE;AAA7B,OAAhB,CAAV;AACA;AACD,GAfD;;AAiBA,sBACC;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAG,aAAYX,GAAI,EAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,GAAG,EAAED,IAAV;AAAgB,IAAA,GAAG,EAAG,WAAUD,KAAM,EAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIC,IAAJ,CAFD,CADD,eAKC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEG,QADF,OACaV,SAAS,CAAC,MAAD,EAASU,QAAT,CADtB,cADD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAQD,KAAR,CAJD,CALD,eAWC;AAAQ,IAAA,OAAO,EAAEK,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAXD,CADD;AAeA;;AAED,eAAeV,WAAf","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { pluralize } from '../../utils/helpers';\nimport { addToCart, updateCartQuantity } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\n\nfunction ProductItem(item) {\n\tconst { image, name, _id, price, quantity } = item;\n\n\tconst state = useSelector((state) => state);\n\tconst dispatch = useDispatch();\n\n\tconst { cart } = state;\n\n\tconst addItemToCart = () => {\n\t\t// find the cart item with the matching id\n\t\tconst itemInCart = cart.find((cartItem) => cartItem._id === _id);\n\n\t\t// if there was a match, call UPDATE with a new purchase quantity\n\t\tif (itemInCart) {\n\t\t\tdispatch(updateCartQuantity(_id, parseInt(itemInCart.purchaseQuantity) + 1));\n\t\t\tidbPromise('cart', 'put', {\n\t\t\t\t...itemInCart,\n\t\t\t\tpurchaseQuantity : parseInt(itemInCart.purchaseQuantity) + 1\n\t\t\t});\n\t\t} else {\n\t\t\tdispatch(addToCart({ ...item, purchaseQuantity: 1 }));\n\t\t\tidbPromise('cart', 'put', { ...item, purchaseQuantity: 1 });\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"card px-1 py-1\">\n\t\t\t<Link to={`/products/${_id}`}>\n\t\t\t\t<img alt={name} src={`/images/${image}`} />\n\t\t\t\t<p>{name}</p>\n\t\t\t</Link>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t{quantity} {pluralize('item', quantity)} in stock\n\t\t\t\t</div>\n\t\t\t\t<span>${price}</span>\n\t\t\t</div>\n\t\t\t<button onClick={addItemToCart}>Add to cart</button>\n\t\t</div>\n\t);\n}\n\nexport default ProductItem;\n"]},"metadata":{},"sourceType":"module"}