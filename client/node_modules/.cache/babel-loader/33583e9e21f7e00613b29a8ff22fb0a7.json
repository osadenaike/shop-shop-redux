{"ast":null,"code":"var _jsxFileName = \"/Users/oluz/Desktop/shop-shop-redux/client/src/components/CategoryMenu/index.js\";\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport { QUERY_CATEGORIES } from '../../utils/queries';\nimport { updateCategories, updateCurrentCategory } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\n\nfunction CategoryMenu() {\n  // get data from DB with Apollo\n  const {\n    loading,\n    data: categoryData\n  } = useQuery(QUERY_CATEGORIES);\n  const {\n    categories\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // if categoryData exists or has changed from the response of useQuery, then run dispatch()\n    if (categoryData) {\n      // execute our dispatch function with our action object indicating the type of action and the data to set our state for categories to\n      dispatch(updateCategories(categoryData.categories)); // also write to IndexedDB\n\n      categoryData.categories.forEach(category => {\n        idbPromise('categories', 'put', category);\n      });\n    } else if (!loading) {\n      idbPromise('categories', 'get').then(categories => {\n        dispatch(updateCategories(categories));\n      });\n    }\n  }, [categoryData, loading, dispatch]);\n\n  const handleClick = id => {\n    dispatch(updateCurrentCategory(id));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }\n  }, \"Choose a Category:\"), categories ? categories.map(item => /*#__PURE__*/React.createElement(\"button\", {\n    key: item._id,\n    onClick: () => {\n      handleClick(item._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 6\n    }\n  }, item.name)) : null);\n}\n\nexport default CategoryMenu;","map":{"version":3,"sources":["/Users/oluz/Desktop/shop-shop-redux/client/src/components/CategoryMenu/index.js"],"names":["React","useEffect","useSelector","useDispatch","useQuery","QUERY_CATEGORIES","updateCategories","updateCurrentCategory","idbPromise","CategoryMenu","loading","data","categoryData","categories","state","dispatch","forEach","category","then","handleClick","id","map","item","_id","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,gBAAT,QAAiC,qBAAjC;AACA,SAASC,gBAAT,EAA2BC,qBAA3B,QAAwD,qBAAxD;AACA,SAASC,UAAT,QAA2B,qBAA3B;;AAEA,SAASC,YAAT,GAAwB;AACvB;AACA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,IAAI,EAAEC;AAAjB,MAAkCR,QAAQ,CAACC,gBAAD,CAAhD;AAEA,QAAM;AAAEQ,IAAAA;AAAF,MAAiBX,WAAW,CAAEY,KAAD,IAAWA,KAAZ,CAAlC;AAEA,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AAEAF,EAAAA,SAAS,CACR,MAAM;AACL;AACA,QAAIW,YAAJ,EAAkB;AACjB;AACAG,MAAAA,QAAQ,CAACT,gBAAgB,CAACM,YAAY,CAACC,UAAd,CAAjB,CAAR,CAFiB,CAGjB;;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwBG,OAAxB,CAAiCC,QAAD,IAAc;AAC7CT,QAAAA,UAAU,CAAC,YAAD,EAAe,KAAf,EAAsBS,QAAtB,CAAV;AACA,OAFD;AAGA,KAPD,MAOO,IAAI,CAACP,OAAL,EAAc;AACpBF,MAAAA,UAAU,CAAC,YAAD,EAAe,KAAf,CAAV,CAAgCU,IAAhC,CAAsCL,UAAD,IAAgB;AACpDE,QAAAA,QAAQ,CAACT,gBAAgB,CAACO,UAAD,CAAjB,CAAR;AACA,OAFD;AAGA;AACD,GAfO,EAgBR,CAAED,YAAF,EAAgBF,OAAhB,EAAyBK,QAAzB,CAhBQ,CAAT;;AAmBA,QAAMI,WAAW,GAAIC,EAAD,IAAQ;AAC3BL,IAAAA,QAAQ,CAACR,qBAAqB,CAACa,EAAD,CAAtB,CAAR;AACA,GAFD;;AAIA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADD,EAGEP,UAAU,GACVA,UAAU,CAACQ,GAAX,CAAgBC,IAAD,iBACd;AACC,IAAA,GAAG,EAAEA,IAAI,CAACC,GADX;AAEC,IAAA,OAAO,EAAE,MAAM;AACdJ,MAAAA,WAAW,CAACG,IAAI,CAACC,GAAN,CAAX;AACA,KAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMED,IAAI,CAACE,IANP,CADD,CADU,GAWP,IAdL,CADD;AAkBA;;AAED,eAAef,YAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport { QUERY_CATEGORIES } from '../../utils/queries';\nimport { updateCategories, updateCurrentCategory } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\n\nfunction CategoryMenu() {\n\t// get data from DB with Apollo\n\tconst { loading, data: categoryData } = useQuery(QUERY_CATEGORIES);\n\n\tconst { categories } = useSelector((state) => state);\n\n\tconst dispatch = useDispatch();\n\n\tuseEffect(\n\t\t() => {\n\t\t\t// if categoryData exists or has changed from the response of useQuery, then run dispatch()\n\t\t\tif (categoryData) {\n\t\t\t\t// execute our dispatch function with our action object indicating the type of action and the data to set our state for categories to\n\t\t\t\tdispatch(updateCategories(categoryData.categories));\n\t\t\t\t// also write to IndexedDB\n\t\t\t\tcategoryData.categories.forEach((category) => {\n\t\t\t\t\tidbPromise('categories', 'put', category);\n\t\t\t\t});\n\t\t\t} else if (!loading) {\n\t\t\t\tidbPromise('categories', 'get').then((categories) => {\n\t\t\t\t\tdispatch(updateCategories(categories));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[ categoryData, loading, dispatch ]\n\t);\n\n\tconst handleClick = (id) => {\n\t\tdispatch(updateCurrentCategory(id));\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Choose a Category:</h2>\n\n\t\t\t{categories ? (\n\t\t\t\tcategories.map((item) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\thandleClick(item._id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.name}\n\t\t\t\t\t</button>\n\t\t\t\t))\n\t\t\t) : null}\n\t\t</div>\n\t);\n}\n\nexport default CategoryMenu;\n"]},"metadata":{},"sourceType":"module"}